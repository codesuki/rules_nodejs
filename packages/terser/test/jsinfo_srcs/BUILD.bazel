load("@npm_bazel_jasmine//:index.from_src.bzl", "jasmine_node_test")
load("@npm_bazel_terser//:index.from_src.bzl", "terser_minified")

# Case 3: Use the JS provider to find inputs from *_bundle rule
load(":produces_jsinfo.bzl", "produces_jsinfo")

produces_jsinfo(
    name = "src3_in",
)

terser_minified(
    name = "case3",
    srcs = [":src3_in"],
    sourcemap = False,
)

jasmine_node_test(
    name = "test",
    srcs = [
        "terser_spec.js",
    ],
    deps = [
        ":case3.js",
    ],
)

# Case 4: test that terser also outputs a JS provider
